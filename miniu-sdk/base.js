const miniu = require('miniu');
const semver = require('semver');

function initialConfig() {
  // 参照账户中心 开发工具密钥配置
  const privateKey = 'MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCC+s8Y0LNy8tbu9AHBsxBsFQ/gvcZKTmF7w5mEV1PTRTpVudONGJZai8j/KCJR/g0LgG6Df+N3PjL93VC34tVWkaNH+KLlikJNbkcm0+S7ebCRK+kJmJbKzpgrhocJWfS1sC2DU2ijO9/6Czxh3FYlCSbY8pihc3J5GqV61jVEbRxxoAsnYz2HvOYhp7vjAvU5UvIW9Is9ZhYKt3NarmD3x0DMB4GTj/YdyNcVIndtT04YqtnFe1tMSUX/FcgTwvZePMMzdaoUpC+ltjhI+I7dMcoRuqpea8UqQE2Qv07MAlrGbTuCM+d4nWTj5aqveQZU3cHPcMiXbz+ZWwlYmNufAgMBAAECggEAAzQlSqMYMJCWB0Q6osVBepNNTx71Ma4XHlLbd2w3ZayEz8H61bGrQ821feA6bqz7HrPmgBrpsmn4D1ORfN30f+iSCNmhCmJGWuR+owl9x8QjOHnNemmcDpvdBvuEZAsqPCNyCYtJvOxi/xe1Q2ODS+acZ6QPbauIOkQXlhiVNvY3Pd4j+cwkYMdiXwZxwji7xy/2IRCfNfVxgANTGxb5s9dsyNq+81Y+Z1K8CekFixlCysllx4g/gBwwcyEy48VrJ29/1CMwFdwfTw1SYD6OImh6DLunDN+rTF+MpoV1otjUhy3pkMcxa0rWHOSPvJeEMDoXdm5AHf0qdaMK6fM0YQKBgQDN6WGIVQb6emmqystUvemBI1adcciNQ22QvQ3xtowHe4gWlCjRcop/KNI9w1Mto8vCDYSno0FpknTMcoxrf7zENE8wGpKcWx+6+PjJsvTPCZgAprung6ecyVMaRd0749/EPyuhnXmoilVKLZqyWiDWnmBKDBoahJUBvA2jUkZJcQKBgQCi1zwj+DDLm9DkZZU2Aq9pjuur1mY9IAjlh6lT5o6AAJ4/GCoZCf5R0NlQ30t2e+4+lMfh0MZQ2ajyZDA+4PNc/KDgSmQ3PTy5KJEgZun6H4VFoalJW7B8sZmDc23yR2bhREV5hhBK/ZJ1yN7Aksnto0gEiRf9aBZgjQ1uK6xuDwKBgDiQWsWLre4SwII1USPHQ6TA42M+xXvgwPFYrcLvhYnsqlahfpECqP8DZLWouWm5LBjzg7RVSXvJyqH6+Y3yOhWf1Pz+37Vp5s6C5DzsFwnktcfABZ6fsOSF/XkjJgH0uBx9yeuMicX9si49VtiVn521RfgxWN5d+1zNnuV1jW9RAoGAX5bnV9oOkscx1ZEICP+Ehvt9vo6Jz6Hpdwuuy3CQ//Tc7/64X6BtKQvnNcEOZEwVq6jcuOM8NyO+OCO16oNUeKZXrbIdqAuLhMmaf6HKAajVK+3dGRH4xQngKrjstodRjjTsb4zSLaMygW/bysGgRZ5O3VK4wWmDkUPbuWtrueMCgYEAhIYNPqBJHLvpbd1pwMbp840SlCE4sH5rO2jBwuW7zbNR0dOvlRazfs5Dd76D0UwNDR852VRocrocNKqjnlStXnfkqj784W3GtMStVOpCRMvmTVeCWftsTFwTF3W2zsB5bulPvyXi3+omVBMU4I+wzTdIaZt412W1OIq1Bl1S6/g='
  const toolId = '9de14c6a58504fb394888334386073f9';

  miniu.setConfig({
    privateKey,
    toolId,
  });
}

module.exports = async function getFirstTinyApp() {
  initialConfig();
  const miniList = await miniu.miniAppList();
  return miniList.length ? miniList[0] : null;
}
